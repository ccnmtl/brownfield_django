{% extends 'base.html' %}

{% block bbjs %}
    <script type="text/javascript" src="{{STATIC_URL}}js/ccnmtljs/bb_models.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/ccnmtljs/bb_collections.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/ccnmtljs/bb_views.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/ccnmtljs/bb_control_views.js"></script>
{% endblock %}

{% block js %}
    <script type="text/template" id="course-list-template">
        <div class="course-name-inside">
        <button class="btn btn-default course_name"><span class="glyphicon glyphicon-th-list"></span> <strong><%= name %></strong> Details</button>
        </div>
        <button class='btn btn-xs btn-default edit-crs pull-right'><span class="glyphicon glyphicon-pencil"></span> Edit Course </button>
    </script>

    <script type="text/template" id="course-edit-template">
        <form id="create-edit-form" method="" action="">
            <span class="course-name-block">
                <label for="edit_course_name">Name:</label>
                <input id="edit_course_name" maxlength="255" name="name" type="text" value="<%= name %>"/><br />
            </span>
            <span class="course-budget-block">
		        <label for="edit_course_startingBudget">StartingBudget:</label> 
			    <input id="edit_course_startingBudget" min="0" name="startingBudget" type="number" value=<%= startingBudget %> /><br />
            </span>
            <span class="course-message-block">
			    <label for="edit_course_message">Message:</label> 
			    <textarea form="create-edit-form" cols="80" id="edit_course_message" name="edit_message" rows="10"><%= message %></textarea><br />
			</span>
            {% comment %}
            <span class="course-professor-block">
			{% if request.user.profile.is_admin %}
				<label for="edit_professor">Professor:</label>
				<select id="edit_professor" name="professor">
               	</select><br />
            {% endif %}
            </span>
            {% endcomment %}
        <button class='btn btn-default btn-xs save-edit-course' type="button">
            Save
        </button>
        <button class='btn btn-default btn-xs cncl-edit-crs' type="button">
            Cancel
        </button>
        </form>
        <br />
    </script>
    
    {% if request.user.profile.is_admin %}
    <script type="text/template" id="instructor-list-template">
        <div class="instructor-list-inside">
            <span class="instructor"><label for="instructor">Instructor:</label>&nbsp;<%= first_name %> <%= last_name %></span>
            <span class="email"><label for="email">Email:</label>&nbsp;<%= email %></span>
        </div>
        <div class="instructor-button-inside">
            <span class="rm-conf"><b>Are you sure you want to remove this instructor?</b>
                <button class='btn btn-default btn-xs pull-right rm-deny'> Cancel </button>
                <button class='btn btn-default btn-xs pull-right rm-inst'> Yes Remove </button>
            </span>
            <button class='btn btn-default btn-xs pull-right conf-del'> Remove Instructor </button>
            <button class='btn btn-default btn-xs pull-right ed-inst'> Edit Instructor </button>
        </div>

    </script>


    <script type="text/template" id="instructor-edit-template">
    <form class="edit-instructor-frm" method="" action="" style="display: inline;">
        {% csrf_token %}
        <span class="inst-edt-first-name">
            <label>First Name: </label>
            <input type="text" placeholder="First Name: " class="edt-frst-name" value="<%= first_name %>" />     
        </span>
        <span class="inst-edt-last-name">
            <label>Last Name: </label>
            <input type="text" placeholder="Last Name: " class="edt-last-name" value="<%= last_name %>" /> 
        </span>
        <span class="inst-edt-email">
            <label>Email: </label>
            <input type="text" placeholder="Email: " class="edt-email" value="<%= email %>" />
        </span>
        <button class='btn btn-xs btn-default pull-right cncl-edit-inst'> Cancel </button>
        <button class='btn btn-default btn-xs pull-right save-edit-instructor'> Save Changes </button>
    </form>
    </script>
    {% endif %}


    <script type="text/javascript">
        jQuery(document).ready(function () {
            var control_view = new ManageCoursesView({
                el: jQuery('.course-creation-area'),
                listEl: jQuery('.course-list'),
                user_id: "{{request.user.id}}"
            });
           
           {% if request.user.profile.is_admin %}
               var instructor_controls = new ManageInstructorsView({
        	       el: jQuery('.instructor_controls')
               });
           {% endif %}
        });
    </script>
{% endblock %}

{% block content %}

  <ul class="nav nav-tabs instructor-nav">
    <li class="active"><a href="#course-list" data-toggle="tab">Courses</a></li>
    <li><a href="#demo" data-toggle="tab">Demo</a></li>
  </ul>
 
  <div class="instructor tab-content">
    {% include "main/ccnmtl/home_dash/course_list_tab.html" %}
    {% include "main/ccnmtl/home_dash/demo_tab.html" %}
  </div>
  {% comment %}{% endcomment %}
  
  
    <!-- Archive Confirmation -->
    <div class="modal fade" id="confirmArchive" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Archive Course</h4>
          </div>
          <div class="modal-body">
            <p>
                Are you sure you want to archive your course? Archiving your course will remove it from the dashboard.
            </p>
          </div>
          <div class="modal-footer">
            <button id="conf-arch" class="btn btn-primary">Continue</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <!-- Deletion Confirmation -->
    <div class="modal fade" id="confirmDeletion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Deletion Course</h4>
          </div>
          <div class="modal-body">
            <p>
                Are you sure you want to delete this instructor?
            </p>
          </div>
          <div class="modal-footer">
            <button id="conf-del" class="btn btn-primary">Continue</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  
  
{% endblock %}
