{% extends 'base.html' %}
{% block content %}
<br /><br />
    <!-- Hiding the sort buttons until functionality is added -->
    <div id="sort-table"  style="display: none;">
        <input type="hidden" name="crs-id" value="{{object.pk}}"/>
	    <button type="button" class="btn btn-default">
            Sort by Student
    	</button>
    	<button type="button" class="btn btn-default">
            Sort by Team
    	</button>
    </div>

    <div class="course-activation">
    <table id="student_team_tables" style="width:100%">
    <form id="act-crs-frm" method="post" action="../../activate_course/{{object.pk}}/">
        {% csrf_token %}
        <th>
        <tr>
            <td><b>First Name</b></td>
            <td><b>Last Name</b></td>
            <td><b>Email</b></td>
            <td><b>Team</b></td>
        </tr>
        </th>
    
        {% for student in student_list %}

        <tr class="student">
            <td>
                <input type="hidden" name="std-id" value="{{student.pk}}"/>
                <input type="hidden" name="first_name" value="{{student.first_name}}">
                {{student.first_name}}
            </td>
            <td>
                <input type="hidden" name="last_name" value="{{student.last_name}}">
                {{student.last_name}}
            </td>
            <td>
                <input type="hidden" name="email" value="{{student.email}}">
                {{student.email}}
            </td>
	        <td>
	            <select>
	                {% for team in team_list %}
                        <option value="{{team.pk}}"> {{team.username}} </option>
		        	{% empty %}
    	        		<p>
            				Please add teams in order to create them.
    	        		</p>
	        	    {% endfor %}
	            </select>
            </td>
        </tr>
        {% empty %}
            <p>Please add students in order to create teams.</p>
        {% endfor %}
    </table>
    </form>
    </div>

    <div class="crs-act-info">
        <h3>Activate Course</h3>
            <p>Activating the course teams will Every student should be a member of a team before you begin.
                <ul>
                    This will:
                    <li>Activate accounts for all non-activated teams with at least one student member.</li>
                    <li>For those new teams, send the student members email (cc'ing you) with the username and password for their team.</li>
                </ul>
            </p>
    </div><!-- End Course Activation Info -->

    <div class="crs-activate">
        <button id="activation-btn" type="submit" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
            Activate Course
        </button><br /><br />
    </div>





<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Course Activation</h4>
      </div>
      <div class="modal-body">
        <p>
            Congratulations! Your course has been successfully activated!&hellip;
            An email will be sent to each of your students informing them of their team and password.
            You may click on the button below to view your course with its current teams and download their progress.
            You may edit you course teams anytime.
        </p>
      </div>
      <div class="modal-footer">
        <a href="../../current_teams/{{object.pk}}/" class="btn btn-primary">View Teams</a>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


{% endblock %}
{% block bbjs %}
<!-- <script type="text/javascript" src="{{STATIC_URL}}js/utility_scripts/backbone_sync.js"></script> -->
<script type="text/javascript" src="{{STATIC_URL}}js/ccnmtljs/activate_course.js"></script>
{% endblock %}
